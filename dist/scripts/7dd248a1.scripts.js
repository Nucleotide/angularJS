"use strict";var app=angular.module("reminderApp",[]);app.config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]);var app=angular.module("reminderApp");app.factory("Reminders",["$http",function(a){var b="http://localhost:3000/reminders",c={};return c.all=function(){return a.get(b+".json")},c.create=function(c){return console.log(c),a.post(b+".json",c)},c.delete=function(c){return a.delete(b+"/"+c.id+".json",c)},c}]),app.factory("Auth",["$http",function(a){var b="http://localhost:3000/session",c={};return c.logged={},c.login=function(d){return a.post(b,d).then(function(b){return c.logged.status=!0,c.logged.user=d.user,a.defaults.headers.common["auth-token"]=b.data,b.data})},c.logout=function(){return a.delete(b).then(function(){return c.logged.status=!1,c.logged.user=null,delete a.defaults.headers.common["auth-token"],null})},c}]),app.controller("MainCtrl",["$scope","Reminders","Auth",function(a,b,c){a.loggedIn=c.logged,a.logout=function(){c.logout()},a.login=function(){c.login(a.credentials).then(function(a){console.log(a)},function(a){console.log(a)}),a.credentials={}},a.formVisible=!1,b.all().success(function(b){a.reminders=b,console.log(b)}),a.createReminder=function(){b.create(a.reminder).success(function(b){a.reminders.push(b)}),a.flash="Luonti onnistui!",a.formVisible=!1,a.reminder={}},a.deleteReminder=function(c){b.delete(c).success(function(){var b=a.reminders.indexOf(c);a.reminders.splice(b,1),a.flash="Poisto onnistui!"})}}]);